/*
 * optimize.s
 *
 *  Created on: 20/8/2024
 *      Author: Ni Qingqing & Hou Linxin
 */
   .syntax unified
	.cpu cortex-m4
	.fpu softvfp
	.thumb

		.global optimize

@ Start of executable code
.section .text

@ CG/[T]EE2028 Assignment 1, Sem 1, AY 2024/25
@ (c) ECE NUS, 2024

@ Write Student 1’s Name here:
@ Write Student 2’s Name here:

@ Look-up table for registers:

@ R0 ...
@ R1 ...
@ ...

@ write your program from here:

optimize:
 	PUSH {R14}

	BL SUBROUTINE

 	POP {R14}

	BX LR

SUBROUTINE:

  @ R1 = x
  @ R2 = lam
  @ R3 = 2a
  @ R4 = 10b
  @ R5 = fp
  @ R6 = xprev
  @ R7 = change
  @ R8 = round

  LDR R3, [R0] @ contains 2a
  LDR R4, [R0, #4] @ contains 10b
  MOV R12, #2
  MUL R3, R12
  MOV R12, #0xA
  MUL R4, R12
  MOV R12, #-1
  MUL R2, R12
  MOV R8, #0

loop:
  MLA R5, R3, R1, R4 @ fp = 2*a*x + b * 10;
  MOV R6, R1

  MUL R12, R2, R5
  MOV R7, #100
  SDIV R7, R12, R7
  ADD R1, R7
  ADD R8, #1
  CMP R1, R6
  BNE loop
